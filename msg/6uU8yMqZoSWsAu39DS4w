repto/faxJAuAmFPwMsG533jGz
ii.dev.2014
1395875110
nwalker
lenina,24
All
Re: фидошники сабжей не меняют!

> юзеры. пишут, пишут, потом бах - а пойдёмте все в эху "новый префикс"
постфикс, ты хотел сказать. 
в этом меня смущает следующий момент - нод-опам придется постоянно обновлять списки обрабатываемых эх. следовательно, на мой взгляд, нужны какие-то методы их автообновления, замены старых эх новыми. 

> то, что я тут собрал, мне нравится
мне нравится общая идея, но не очень нравится реализация. 
и вот как раз в тему - какой ты видишь модель распространения изменений(новых сообщений)? я не был в фидо, так что могу не знать чего-то, что тебе кажется очевидным и общеизвестным. 
так вот, я вижу навскидку два основных варианта, назовем их "каскад" и "меш". 
"каскад" - организованный вариант: для каждой эхи есть группа нод N1, N2, ..., NK, которые можно назвать корневыми. ноды второго уровня, например, N11 и N21, которые знают, что эту эху нужно и пуллить, и пушить в/из N1 и N2 соответственно. ноды третьего уровня делают аналогичное с нодами второго уровня, etc. 
то есть, для каждой эхи нода, кроме корневой, знает, куда пушить и откуда пуллить новые сообщения, а корневые ноды объединены в пуш- или пулл-кольцо. в этом случае достаточно легко минимизировать траффик внутри сети.

"меш" - хаотичный вариант. каждой ноде для отдельной эхи известно несколько нод с различным доступом(только пуш, только пулл, оба), синхронизация производится согласно этим данным, без какой-либо логики и синхронизации.
как оптимизировать такой вариант я не смог пока придумать даже в общих чертах.