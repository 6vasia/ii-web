
ii.dev.2014
1395847593
51t
lenina,1
All
протокол кросс-ноды - 1

пуллов есть много разных.

один - совсем примитивный, на нём сейчас работают http-клиент и txt-клиент - получить список сообщений с эхи, сравнить со своей эхой, добавить все новые, и спокойно долбить сервер, выкачивая по одному сообщению.

сейчас оба эти клиента даже кросспосты несколько раз выкачивают, не проверяя, что файл уже есть.

второе - выкачивать бандлы, запросами. 

https://bitbucket.org/51t/ii/src/0259213a0bf2e0497a41289e5e2122e8faf1ca3f/run.py?at=default#cl-65

там можно делать запрос типа ЭХА:ПОСЛЕДНИЙID/ЭХА:ПОСЛЕДНИЙID, и одним запросом брать все обновления, одновременно и сообщения, и идентификаторы, которые превращаются в готовые сообщения через toss.